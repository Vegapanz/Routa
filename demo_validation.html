<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Input Validation Demo</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet">
    <style>
        .demo-box {
            border: 2px solid #dee2e6;
            border-radius: 10px;
            padding: 20px;
            margin: 20px 0;
        }
        .valid-example {
            background-color: #d4edda;
            padding: 10px;
            border-radius: 5px;
            margin: 10px 0;
        }
        .invalid-example {
            background-color: #f8d7da;
            padding: 10px;
            border-radius: 5px;
            margin: 10px 0;
        }
        .code {
            background: #f8f9fa;
            padding: 5px 10px;
            border-radius: 3px;
            font-family: monospace;
        }
    </style>
</head>
<body>
    <div class="container my-5">
        <h1 class="text-center mb-5">üìã Driver Application - Input Validation Demo</h1>

        <!-- Names -->
        <div class="demo-box">
            <h3>üë§ Name Fields</h3>
            <p><strong>Restriction:</strong> Letters only (A-Z, a-z, √±, √°, √©, √≠, √≥, √∫), spaces, dots, hyphens</p>
            <div class="row">
                <div class="col-md-6">
                    <label class="form-label">Try typing: "Juan123 Dela Cruz"</label>
                    <input type="text" class="form-control" id="testName" 
                        pattern="[A-Za-z√±√ë√°√©√≠√≥√∫√Å√â√ç√ì√ö\s.-]+" 
                        placeholder="Type anything...">
                </div>
                <div class="col-md-6">
                    <div class="valid-example">‚úÖ Valid: Juan Dela Cruz</div>
                    <div class="invalid-example">‚ùå Auto-filtered: Numbers and symbols removed</div>
                </div>
            </div>
        </div>

        <!-- Phone Number -->
        <div class="demo-box">
            <h3>üì± Phone Number</h3>
            <p><strong>Format:</strong> 09123456789 or +639123456789</p>
            <div class="row">
                <div class="col-md-6">
                    <label class="form-label">Try typing: "09123456789"</label>
                    <input type="tel" class="form-control" id="testPhone" 
                        pattern="(09|\+639)[0-9]{9}"
                        placeholder="09123456789">
                </div>
                <div class="col-md-6">
                    <div class="valid-example">‚úÖ Valid: 09123456789</div>
                    <div class="valid-example">‚úÖ Valid: +639123456789</div>
                    <div class="invalid-example">‚ùå Invalid: 123456789 (too short)</div>
                </div>
            </div>
        </div>

        <!-- License Number -->
        <div class="demo-box">
            <h3>ü™™ Driver's License Number</h3>
            <p><strong>Format:</strong> N01-12-345678 (Auto-formatted)</p>
            <div class="row">
                <div class="col-md-6">
                    <label class="form-label">Try typing: "N011234567890"</label>
                    <input type="text" class="form-control" id="testLicense" 
                        pattern="[A-Z][0-9]{2}-[0-9]{2}-[0-9]{6}"
                        placeholder="N01-12-345678" maxlength="15">
                </div>
                <div class="col-md-6">
                    <div class="valid-example">‚úÖ Auto-formats to: N01-12-345678</div>
                    <div class="invalid-example">‚ùå Pattern: [Letter][00]-[00]-[000000]</div>
                </div>
            </div>
        </div>

        <!-- Plate Number -->
        <div class="demo-box">
            <h3>üöó Plate Number</h3>
            <p><strong>Format:</strong> ABC1234 (Auto-uppercase)</p>
            <div class="row">
                <div class="col-md-6">
                    <label class="form-label">Try typing: "abc1234"</label>
                    <input type="text" class="form-control" id="testPlate" 
                        pattern="[A-Z]{3}[0-9]{3,4}|[A-Z]{2}[0-9]{4,5}"
                        placeholder="ABC1234" maxlength="8" style="text-transform: uppercase;">
                </div>
                <div class="col-md-6">
                    <div class="valid-example">‚úÖ Auto-converts to: ABC1234</div>
                    <div class="valid-example">‚úÖ Also accepts: AB12345</div>
                    <div class="invalid-example">‚ùå Lowercase auto-converted to uppercase</div>
                </div>
            </div>
        </div>

        <!-- Email -->
        <div class="demo-box">
            <h3>üìß Email Address</h3>
            <p><strong>Format:</strong> name@domain.com (Auto-lowercase)</p>
            <div class="row">
                <div class="col-md-6">
                    <label class="form-label">Try typing: "JUAN@EMAIL.COM"</label>
                    <input type="email" class="form-control" id="testEmail" 
                        pattern="[a-z0-9._%+-]+@[a-z0-9.-]+\.[a-z]{2,}$"
                        placeholder="juan@email.com">
                </div>
                <div class="col-md-6">
                    <div class="valid-example">‚úÖ Auto-converts to: juan@email.com</div>
                    <div class="invalid-example">‚ùå Invalid: juan@email (no TLD)</div>
                </div>
            </div>
        </div>

        <!-- Zip Code -->
        <div class="demo-box">
            <h3>üìÆ Zip Code</h3>
            <p><strong>Format:</strong> 4-digit Philippine zip code</p>
            <div class="row">
                <div class="col-md-6">
                    <label class="form-label">Try typing: "1000abc"</label>
                    <input type="text" class="form-control" id="testZip" 
                        pattern="[0-9]{4}"
                        placeholder="1000" minlength="4" maxlength="4">
                </div>
                <div class="col-md-6">
                    <div class="valid-example">‚úÖ Valid: 1000</div>
                    <div class="invalid-example">‚ùå Auto-filters: Letters removed, max 4 digits</div>
                </div>
            </div>
        </div>

        <!-- Year -->
        <div class="demo-box">
            <h3>üìÖ Vehicle Year</h3>
            <p><strong>Range:</strong> 2000-2025</p>
            <div class="row">
                <div class="col-md-6">
                    <label class="form-label">Try entering: 1999 or 2030</label>
                    <input type="number" class="form-control" id="testYear" 
                        min="2000" max="2025" placeholder="2020">
                </div>
                <div class="col-md-6">
                    <div class="valid-example">‚úÖ Valid: 2020</div>
                    <div class="invalid-example">‚ùå Auto-corrects: <2000 ‚Üí 2000, >2025 ‚Üí 2025</div>
                </div>
            </div>
        </div>

        <!-- Date -->
        <div class="demo-box">
            <h3>üéÇ Date of Birth</h3>
            <p><strong>Requirement:</strong> Must be 18+ years old</p>
            <div class="row">
                <div class="col-md-6">
                    <label class="form-label">Select a date</label>
                    <input type="date" class="form-control" id="testDOB" 
                        min="1940-01-01" max="2007-01-01">
                </div>
                <div class="col-md-6">
                    <div class="valid-example">‚úÖ Valid: Any date making applicant 18+</div>
                    <div class="invalid-example">‚ùå Blocked: Dates after 2007-01-01</div>
                </div>
            </div>
        </div>

        <!-- Franchise Number -->
        <div class="demo-box">
            <h3>üé´ Franchise Number</h3>
            <p><strong>Format:</strong> FR-2024-12345 (Auto-formatted)</p>
            <div class="row">
                <div class="col-md-6">
                    <label class="form-label">Try typing: "FR202412345"</label>
                    <input type="text" class="form-control" id="testFranchise" 
                        pattern="[A-Z]{2}-[0-9]{4}-[0-9]{5}"
                        placeholder="FR-2024-12345" maxlength="15" style="text-transform: uppercase;">
                </div>
                <div class="col-md-6">
                    <div class="valid-example">‚úÖ Auto-formats to: FR-2024-12345</div>
                    <div class="invalid-example">‚ùå Pattern: [XX]-[0000]-[00000]</div>
                </div>
            </div>
        </div>

        <div class="alert alert-info mt-5">
            <h4>üß™ Test Instructions</h4>
            <ol>
                <li>Try entering invalid data in each field above</li>
                <li>Watch as invalid characters are auto-removed</li>
                <li>See auto-formatting in action (hyphens, uppercase, etc.)</li>
                <li>Notice validation feedback (green = valid, red = invalid)</li>
            </ol>
            <p class="mb-0"><strong>All these restrictions are now active in the driver application form!</strong></p>
        </div>

        <div class="text-center my-5">
            <a href="driver-application.php" class="btn btn-success btn-lg">Go to Application Form</a>
            <a href="php/setup_and_test_driver_table.php" class="btn btn-primary btn-lg">Setup Database</a>
            <a href="docs/DRIVER_APPLICATION_VALIDATION.md" class="btn btn-secondary btn-lg" target="_blank">View Full Documentation</a>
        </div>
    </div>

    <script>
        // Demo: Name field - auto-remove numbers and special chars
        document.getElementById('testName').addEventListener('input', function(e) {
            e.target.value = e.target.value.replace(/[^A-Za-z√±√ë√°√©√≠√≥√∫√Å√â√ç√ì√ö\s.-]/g, '');
        });

        // Demo: Phone - auto-format
        document.getElementById('testPhone').addEventListener('input', function(e) {
            let value = e.target.value.replace(/\D/g, '');
            if (value.startsWith('639')) {
                value = '+' + value;
            } else if (value.length === 10) {
                value = '0' + value;
            }
            e.target.value = value;
        });

        // Demo: License - auto-format with hyphens
        document.getElementById('testLicense').addEventListener('input', function(e) {
            let value = e.target.value.toUpperCase().replace(/[^A-Z0-9-]/g, '');
            if (value.length > 3 && value[3] !== '-') {
                value = value.slice(0, 3) + '-' + value.slice(3);
            }
            if (value.length > 6 && value[6] !== '-') {
                value = value.slice(0, 6) + '-' + value.slice(6);
            }
            e.target.value = value.slice(0, 15);
        });

        // Demo: Plate - auto-uppercase
        document.getElementById('testPlate').addEventListener('input', function(e) {
            e.target.value = e.target.value.toUpperCase().replace(/[^A-Z0-9]/g, '');
        });

        // Demo: Email - auto-lowercase
        document.getElementById('testEmail').addEventListener('input', function(e) {
            e.target.value = e.target.value.toLowerCase();
        });

        // Demo: Zip - numbers only
        document.getElementById('testZip').addEventListener('input', function(e) {
            e.target.value = e.target.value.replace(/\D/g, '').slice(0, 4);
        });

        // Demo: Year - auto-correct range
        document.getElementById('testYear').addEventListener('input', function(e) {
            const value = parseInt(e.target.value);
            if (value < 2000) e.target.value = 2000;
            if (value > 2025) e.target.value = 2025;
        });

        // Demo: Franchise - auto-format
        document.getElementById('testFranchise').addEventListener('input', function(e) {
            let value = e.target.value.toUpperCase().replace(/[^A-Z0-9-]/g, '');
            if (value.length > 2 && value[2] !== '-') {
                value = value.slice(0, 2) + '-' + value.slice(2);
            }
            if (value.length > 7 && value[7] !== '-') {
                value = value.slice(0, 7) + '-' + value.slice(7);
            }
            e.target.value = value.slice(0, 15);
        });

        // Visual feedback
        document.querySelectorAll('input').forEach(input => {
            input.addEventListener('input', function() {
                if (this.validity.valid && this.value.length > 0) {
                    this.style.borderColor = '#198754';
                    this.style.boxShadow = '0 0 0 0.2rem rgba(25, 135, 84, 0.25)';
                } else if (this.value.length > 0) {
                    this.style.borderColor = '#dc3545';
                    this.style.boxShadow = '0 0 0 0.2rem rgba(220, 53, 69, 0.25)';
                } else {
                    this.style.borderColor = '#ced4da';
                    this.style.boxShadow = 'none';
                }
            });
        });
    </script>
</body>
</html>
